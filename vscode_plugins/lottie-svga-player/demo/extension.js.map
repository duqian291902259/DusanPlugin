{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://lottie-svga-player/./src/LottieFileEditorProvider.ts","webpack://lottie-svga-player/./src/SvgaFileEditorProvider.ts","webpack://lottie-svga-player/./src/dispose.ts","webpack://lottie-svga-player/./src/utils.ts","webpack://lottie-svga-player/external commonjs \"vscode\"","webpack://lottie-svga-player/external node-commonjs \"fs\"","webpack://lottie-svga-player/external node-commonjs \"path\"","webpack://lottie-svga-player/webpack/bootstrap","webpack://lottie-svga-player/./src/extension.ts"],"sourcesContent":["import * as path from 'path';\nimport * as vscode from 'vscode';\nimport { Disposable, disposeAll } from './dispose';\nimport { isJsonString, getErrorPage } from './utils';\nimport * as fs from 'fs';\n/**\n * Define the type of edits used in paw draw files.\n */\ninterface PawDrawEdit {\n\treadonly color: string;\n\treadonly stroke: ReadonlyArray<[number, number]>;\n}\n\ninterface PawDrawDocumentDelegate {\n\tgetFileData(): Promise<Uint8Array>;\n}\n\n/**\n * Define the document (the data model) used for paw draw files.\n */\nclass PawDrawDocument extends Disposable implements vscode.CustomDocument {\n\n\tstatic async create(\n\t\turi: vscode.Uri,\n\t\tbackupId: string | undefined,\n\t\tdelegate: PawDrawDocumentDelegate,\n\t): Promise<PawDrawDocument | PromiseLike<PawDrawDocument>> {\n\t\t// If we have a backup, read that. Otherwise read the resource from the workspace\n\t\tconst dataFile = typeof backupId === 'string' ? vscode.Uri.parse(backupId) : uri;\n\t\tconst fileData = await PawDrawDocument.readFile(dataFile);\n\t\treturn new PawDrawDocument(uri, fileData, delegate);\n\t}\n\n\tprivate static async readFile(uri: vscode.Uri): Promise<Uint8Array> {\n\t\tif (uri.scheme === 'untitled') {\n\t\t\treturn new Uint8Array();\n\t\t}\n\t\treturn vscode.workspace.fs.readFile(uri);\n\t}\n\n\tprivate readonly _uri: vscode.Uri;\n\n\tprivate _documentData: Uint8Array;\n\tprivate _edits: Array<PawDrawEdit> = [];\n\tprivate _savedEdits: Array<PawDrawEdit> = [];\n\n\tprivate readonly _delegate: PawDrawDocumentDelegate;\n\n\tprivate constructor(\n\t\turi: vscode.Uri,\n\t\tinitialContent: Uint8Array,\n\t\tdelegate: PawDrawDocumentDelegate\n\t) {\n\t\tsuper();\n\t\tthis._uri = uri;\n\t\tthis._documentData = initialContent;\n\t\tthis._delegate = delegate;\n\t}\n\n\tpublic get uri() { return this._uri; }\n\n\tpublic get documentData(): Uint8Array { return this._documentData; }\n\n\tprivate readonly _onDidDispose = this._register(new vscode.EventEmitter<void>());\n\t/**\n\t * Fired when the document is disposed of.\n\t */\n\tpublic readonly onDidDispose = this._onDidDispose.event;\n\n\tprivate readonly _onDidChangeDocument = this._register(new vscode.EventEmitter<{\n\t\treadonly content?: Uint8Array;\n\t\treadonly edits: readonly PawDrawEdit[];\n\t}>());\n\t/**\n\t * Fired to notify webviews that the document has changed.\n\t */\n\tpublic readonly onDidChangeContent = this._onDidChangeDocument.event;\n\n\tprivate readonly _onDidChange = this._register(new vscode.EventEmitter<{\n\t\treadonly label: string,\n\t\tundo(): void,\n\t\tredo(): void,\n\t}>());\n\t/**\n\t * Fired to tell VS Code that an edit has occured in the document.\n\t * \n\t * This updates the document's dirty indicator.\n\t */\n\tpublic readonly onDidChange = this._onDidChange.event;\n\n\t/**\n\t * Called by VS Code when there are no more references to the document.\n\t * \n\t * This happens when all editors for it have been closed.\n\t */\n\tdispose(): void {\n\t\tthis._onDidDispose.fire();\n\t\tsuper.dispose();\n\t}\n\n\t/**\n\t * Called when the user edits the document in a webview.\n\t * \n\t * This fires an event to notify VS Code that the document has been edited.\n\t */\n\tmakeEdit(edit: PawDrawEdit) {\n\t\tthis._edits.push(edit);\n\n\t\tthis._onDidChange.fire({\n\t\t\tlabel: 'Stroke',\n\t\t\tundo: async () => {\n\t\t\t\tthis._edits.pop();\n\t\t\t\tthis._onDidChangeDocument.fire({\n\t\t\t\t\tedits: this._edits,\n\t\t\t\t});\n\t\t\t},\n\t\t\tredo: async () => {\n\t\t\t\tthis._edits.push(edit);\n\t\t\t\tthis._onDidChangeDocument.fire({\n\t\t\t\t\tedits: this._edits,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Called by VS Code when the user saves the document.\n\t */\n\tasync save(cancellation: vscode.CancellationToken): Promise<void> {\n\t\tawait this.saveAs(this.uri, cancellation);\n\t\tthis._savedEdits = Array.from(this._edits);\n\t}\n\n\t/**\n\t * Called by VS Code when the user saves the document to a new location.\n\t */\n\tasync saveAs(targetResource: vscode.Uri, cancellation: vscode.CancellationToken): Promise<void> {\n\t\tconst fileData = await this._delegate.getFileData();\n\t\tif (cancellation.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tawait vscode.workspace.fs.writeFile(targetResource, fileData);\n\t}\n\n\t/**\n\t * Called by VS Code when the user calls `revert` on a document.\n\t */\n\tasync revert(_cancellation: vscode.CancellationToken): Promise<void> {\n\t\tconst diskContent = await PawDrawDocument.readFile(this.uri);\n\t\tthis._documentData = diskContent;\n\t\tthis._edits = this._savedEdits;\n\t\tthis._onDidChangeDocument.fire({\n\t\t\tcontent: diskContent,\n\t\t\tedits: this._edits,\n\t\t});\n\t}\n\n\t/**\n\t * Called by VS Code to backup the edited document.\n\t * \n\t * These backups are used to implement hot exit.\n\t */\n\tasync backup(destination: vscode.Uri, cancellation: vscode.CancellationToken): Promise<vscode.CustomDocumentBackup> {\n\t\tawait this.saveAs(destination, cancellation);\n\n\t\treturn {\n\t\t\tid: destination.toString(),\n\t\t\tdelete: async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait vscode.workspace.fs.delete(destination);\n\t\t\t\t} catch {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n}\n\n/**\n * Provider for paw draw editors.\n * \n * Paw draw editors are used for `.pawDraw` files, which are just `.png` files with a different file extension.\n * \n * This provider demonstrates:\n * \n * - How to implement a custom editor for binary files.\n * - Setting up the initial webview for a custom editor.\n * - Loading scripts and styles in a custom editor.\n * - Communication between VS Code and the custom editor.\n * - Using CustomDocuments to store information that is shared between multiple custom editors.\n * - Implementing save, undo, redo, and revert.\n * - Backing up a custom editor.\n */\nexport class LottieFileEditorProvider implements vscode.CustomEditorProvider<PawDrawDocument> {\n\n\tpublic static register(context: vscode.ExtensionContext): vscode.Disposable {\n\t\treturn vscode.window.registerCustomEditorProvider(\n\t\t\tLottieFileEditorProvider.viewType,\n\t\t\tnew LottieFileEditorProvider(context),\n\t\t\t{\n\t\t\t\twebviewOptions: {\n\t\t\t\t\tretainContextWhenHidden: true,\n\t\t\t\t},\n\t\t\t\tsupportsMultipleEditorsPerDocument: false,\n\t\t\t});\n\t}\n\n\tprivate static readonly viewType = 'lottie.preview';\n\n\t/**\n\t * Tracks all known webviews\n\t */\n\tprivate readonly webviews = new WebviewCollection();\n\n\tconstructor(\n\t\tprivate readonly _context: vscode.ExtensionContext\n\t) { }\n\n\t//#region CustomEditorProvider\n\n\tasync openCustomDocument(\n\t\turi: vscode.Uri,\n\t\topenContext: { backupId?: string },\n\t\t_token: vscode.CancellationToken\n\t): Promise<PawDrawDocument> {\n\t\tconst document: PawDrawDocument = await PawDrawDocument.create(uri, openContext.backupId, {\n\t\t\tgetFileData: async () => {\n\t\t\t\tconsole.log(\"openCustomDocument \" + uri);\n\t\t\t\tconst webviewsForDocument = Array.from(this.webviews.get(document.uri));\n\t\t\t\tif (!webviewsForDocument.length) {\n\t\t\t\t\tthrow new Error('Could not find webview to save for');\n\t\t\t\t}\n\t\t\t\tconst panel = webviewsForDocument[0];\n\t\t\t\tconst response = await this.postMessageWithResponse<number[]>(panel, 'getFileData', {});\n\t\t\t\treturn new Uint8Array(response);\n\t\t\t}\n\t\t});\n\n\t\tconst listeners: vscode.Disposable[] = [];\n\n\t\tlisteners.push(document.onDidChange(e => {\n\t\t\t// Tell VS Code that the document has been edited by the use.\n\t\t\tthis._onDidChangeCustomDocument.fire({\n\t\t\t\tdocument,\n\t\t\t\t...e,\n\t\t\t});\n\t\t}));\n\n\t\tlisteners.push(document.onDidChangeContent(e => {\n\t\t\t// Update all webviews when the document changes\n\t\t\tfor (const webviewPanel of this.webviews.get(document.uri)) {\n\t\t\t\tthis.postMessage(webviewPanel, 'update', {\n\t\t\t\t\tedits: e.edits,\n\t\t\t\t\tcontent: e.content,\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tdocument.onDidDispose(() => disposeAll(listeners));\n\n\t\treturn document;\n\t}\n\n\tasync resolveCustomEditor(\n\t\tdocument: PawDrawDocument,\n\t\twebviewPanel: vscode.WebviewPanel,\n\t\t_token: vscode.CancellationToken\n\t): Promise<void> {\n\t\tthis.webviews.add(document.uri, webviewPanel);\n\t\twebviewPanel.webview.options = {\n\t\t\tenableScripts: true,\n\t\t};\n\t\twebviewPanel.webview.html = this.getHtmlForWebview(webviewPanel.webview);\n\n\t\twebviewPanel.webview.onDidReceiveMessage(e => this.onMessage(document, e));\n\n\t\twebviewPanel.webview.onDidReceiveMessage(e => {\n\t\t\tlet json = document.documentData + \"\";\n\t\t\tconsole.log(\"document.documentData:\" + json);\n\t\t\tif (e.type === 'ready') {\n\n\t\t\t\tlet checkLottie = isJsonString(json);\n\t\t\t\tconsole.log(\"read to play,checkLottie=\" + checkLottie);\n\n\t\t\t\tif (checkLottie === true) {\n\t\t\t\t\tconst htmlContent = this.getHtmlContent(json);\n\t\t\t\t\t//send msg to start play\n\t\t\t\t\tthis.postMessage(webviewPanel, 'init', {\n\t\t\t\t\t\tvalue: document.documentData\n\t\t\t\t\t});\n\t\t\t\t\twebviewPanel.webview.html = htmlContent;\n\t\t\t\t} else {\n\t\t\t\t\tvscode.commands.executeCommand('workbench.action.closeActiveEditor');\n\t\t\t\t\tconsole.log(\"not lottie file=\" + json);\n\n\t\t\t\t\tvscode.commands.executeCommand(\n\t\t\t\t\t\t\"vscode.openWith\",\n\t\t\t\t\t\tdocument.uri,\n\t\t\t\t\t\t\"default\",\n\t\t\t\t\t\twebviewPanel.viewColumn\n\t\t\t\t\t);\n\t\t\t\t\t// Not loading HTML into the webview\n\t\t\t\t\t//webviewPanel.webview.html = getErrorPage(json);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate readonly _onDidChangeCustomDocument = new vscode.EventEmitter<vscode.CustomDocumentEditEvent<PawDrawDocument>>();\n\tpublic readonly onDidChangeCustomDocument = this._onDidChangeCustomDocument.event;\n\n\tpublic saveCustomDocument(document: PawDrawDocument, cancellation: vscode.CancellationToken): Thenable<void> {\n\t\treturn document.save(cancellation);\n\t}\n\n\tpublic saveCustomDocumentAs(document: PawDrawDocument, destination: vscode.Uri, cancellation: vscode.CancellationToken): Thenable<void> {\n\t\treturn document.saveAs(destination, cancellation);\n\t}\n\n\tpublic revertCustomDocument(document: PawDrawDocument, cancellation: vscode.CancellationToken): Thenable<void> {\n\t\treturn document.revert(cancellation);\n\t}\n\n\tpublic backupCustomDocument(document: PawDrawDocument, context: vscode.CustomDocumentBackupContext, cancellation: vscode.CancellationToken): Thenable<vscode.CustomDocumentBackup> {\n\t\treturn document.backup(context.destination, cancellation);\n\t}\n\n\tprivate getHtmlForWebview(webview: vscode.Webview): string {\n\t\tconst lottie = vscode.Uri.file(\n\t\t\tpath.join(this._context.extensionPath, 'demo', 'lottie.json')\n\t\t);\n\t\tlet jsonString = fs.readFileSync(lottie.path, 'utf8');\n\t\tconst htmlContent = this.getHtmlContent(\"{}\");\n\t\t//console.log(\"htmlContent=\" + htmlContent);\n\t\treturn htmlContent;\n\t}\n\n\tprivate _requestId = 1;\n\tprivate readonly _callbacks = new Map<number, (response: any) => void>();\n\n\n\tprivate getHtmlContent(json: string): string {\n\t\treturn `<!DOCTYPE html>\n\t\t<html>\n\t\t<head>\n\t\t\t<meta charset=\"UTF-8\"/>\n\t\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"/>\n\t\t\t<meta name=\"description\" content=\"LottiePlayer by 杜小菜，duqian2010@gmail.com\">\n\t\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n\t\t\t<title>LottiePlayer</title>\n\t\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.4/lottie.min.js\"></script>\n\t\t\t<style>\n\t\t\t  body{\n\t\t\t\t background-color:#3C3F41;\n\t\t\t  }\n\t\t\t  #app {\n\t\t\t\twidth: 500px;\n\t\t\t\theight: 500px;\n\t\t\t\tmargin:10px auto;\n\t\t\t  }\n\t\t\t  #lottieTitle {\n\t\t\t\twidth: 300px;\n\t\t\t\tmargin:60px auto;\n\t\t\t\tdisplay:flex;\n\t\t\t  }\n\t\t\t  button {\n\t\t\t\twidth:50px;height:30px;padding:5px 0px;margin-left:10px;text-align:center;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\tborder: none;\n\t\t\t\tcolor:#000000;\n\t\t\t  }\n\t\t\t  .title{\n\t\t\t\theight: 30px;\n\t\t\t\tline-height: 30px;\n\t\t\t\tmargin: 0;\n\t\t\t\tcolor:#66FFFFFF;\n\t\t\t  }\n\t\t\n\t\t\t</style>\n\t\t</head>\n\t\t<body>\n\t\t<div id=\"lottieTitle\">\n\t\t\t<h4 class=\"title\">LottiePlayer </h4>\n\t\t\t<button onclick=\"startAnimation()\"> Play</button>\n\t\t\t<button onclick=\"pauseAnimation()\"> Pause</button>\n\t\t\t<button onclick=\"stopAnimation()\"> Clear</button>\n\t\t</div>\n\t\t<div id=\"app\"></div>\n\t\t</body>\n\t\t<script>\n\n\t\t\tlet animationData = ${json};\n\n\t\t\t(function () {\n\t\t\t\tconst vscode = acquireVsCodeApi();\n\t\t\t\t//Handle messages from the extension\n\t\t\t\twindow.addEventListener('message', async e => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tbody,\n\t\t\t\t\t} = e.data;\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'init': {\n\t\t\t\t\t\t\tconsole.log(\"ini player\");\n\t\t\t\t\t\t\tconst originData = body.value.data+\"\";\n\t\t\t\t\t\t\t//const data = new Uint8Array(originData);\n\t\t\t\t\t\t\t//console.log(\"data=\" + data);\n\t\t\t\t\t\t\tconsole.log(\"originData=\" + originData);\n\t\t\t\t\t\t\tanimationData = originData;\n\t\t\t\t\t\t\tinitPlayer();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvscode.postMessage({\n\t\t\t\t\ttype: 'ready'\n\t\t\t\t});\n\t\t\t}());\n\t\t\t\n\t\t\tvar player;\n\t\t\tinitPlayer();\n\t\t\tfunction initPlayer(){\n\t\t\t   if(player)return;\n\t\t\t   player = lottie.loadAnimation({\n\t\t\t\t  container: document.querySelector(\"#app\"),\n\t\t\t\t  //path: \"https://assets10.lottiefiles.com/packages/lf20_l3qxn9jy.json\",\n\t\t\t\t  animationData: animationData, // the animation data\n\t\t\t\t  loop: true,\n\t\t\t\t  autoplay: true,\n\t\t\t\t  renderer: \"svg\",\n\t\t\t\t});\n\t\t\t}\n\t\t\t//play\n\t\t\tfunction startAnimation(){\n\t\t\t\tinitPlayer();\n\t\t\t\tplayer.play();\n\t\t\t}\n\t\t\n\t\t\t//pause\n\t\t\tfunction pauseAnimation(){\n\t\t\t\tinitPlayer();\n\t\t\t\tplayer.pause();\n\t\t\t}\n\t\t\n\t\t\t//clear or stop\n\t\t\tfunction stopAnimation(){\n\t\t\t\tinitPlayer();\n\t\t\t\tplayer.destroy();\n\t\t\t\tplayer = null;\n\t\t\t}\n\t\t\n\t\t</script>\n\t\t</html>\n\t\t`;\n\t}\n\n\tprivate postMessageWithResponse<R = unknown>(panel: vscode.WebviewPanel, type: string, body: any): Promise<R> {\n\t\tconst requestId = this._requestId++;\n\t\tconst p = new Promise<R>(resolve => this._callbacks.set(requestId, resolve));\n\t\tpanel.webview.postMessage({ type, requestId, body });\n\t\treturn p;\n\t}\n\n\tprivate postMessage(panel: vscode.WebviewPanel, type: string, body: any): void {\n\t\tpanel.webview.postMessage({ type, body });\n\t}\n\n\tprivate onMessage(document: PawDrawDocument, message: any) {\n\t\tswitch (message.type) {\n\t\t\tcase 'stroke':\n\t\t\t\tdocument.makeEdit(message as PawDrawEdit);\n\t\t\t\treturn;\n\n\t\t\tcase 'response':\n\t\t\t\t{\n\t\t\t\t\tconst callback = this._callbacks.get(message.requestId);\n\t\t\t\t\tcallback?.(message.body);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Tracks all webviews.\n */\nclass WebviewCollection {\n\n\tprivate readonly _webviews = new Set<{\n\t\treadonly resource: string;\n\t\treadonly webviewPanel: vscode.WebviewPanel;\n\t}>();\n\n\t/**\n\t * Get all known webviews for a given uri.\n\t */\n\tpublic *get(uri: vscode.Uri): Iterable<vscode.WebviewPanel> {\n\t\tconst key = uri.toString();\n\t\tfor (const entry of this._webviews) {\n\t\t\tif (entry.resource === key) {\n\t\t\t\tyield entry.webviewPanel;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Add a new webview to the collection.\n\t */\n\tpublic add(uri: vscode.Uri, webviewPanel: vscode.WebviewPanel) {\n\t\tconst entry = { resource: uri.toString(), webviewPanel };\n\t\tthis._webviews.add(entry);\n\n\t\twebviewPanel.onDidDispose(() => {\n\t\t\tthis._webviews.delete(entry);\n\t\t});\n\t}\n}","import * as path from 'path';\nimport * as vscode from 'vscode';\nimport { Disposable, disposeAll } from './dispose';\nimport { getNonce } from './utils';\nimport * as fs from 'fs';\n/**\n * Define the type of edits used in paw draw files.\n */\ninterface PawDrawEdit {\n\treadonly color: string;\n\treadonly stroke: ReadonlyArray<[number, number]>;\n}\n\ninterface PawDrawDocumentDelegate {\n\tgetFileData(): Promise<Uint8Array>;\n}\n\n/**\n * Define the document (the data model) used for paw draw files.\n */\nclass PawDrawDocument extends Disposable implements vscode.CustomDocument {\n\n\tstatic async create(\n\t\turi: vscode.Uri,\n\t\tbackupId: string | undefined,\n\t\tdelegate: PawDrawDocumentDelegate,\n\t): Promise<PawDrawDocument | PromiseLike<PawDrawDocument>> {\n\t\t// If we have a backup, read that. Otherwise read the resource from the workspace\n\t\tconst dataFile = typeof backupId === 'string' ? vscode.Uri.parse(backupId) : uri;\n\t\tconst fileData = await PawDrawDocument.readFile(dataFile);\n\t\treturn new PawDrawDocument(uri, fileData, delegate);\n\t}\n\n\tprivate static async readFile(uri: vscode.Uri): Promise<Uint8Array> {\n\t\tif (uri.scheme === 'untitled') {\n\t\t\treturn new Uint8Array();\n\t\t}\n\t\treturn vscode.workspace.fs.readFile(uri);\n\t}\n\n\tprivate readonly _uri: vscode.Uri;\n\n\tprivate _documentData: Uint8Array;\n\tprivate _edits: Array<PawDrawEdit> = [];\n\tprivate _savedEdits: Array<PawDrawEdit> = [];\n\n\tprivate readonly _delegate: PawDrawDocumentDelegate;\n\n\tprivate constructor(\n\t\turi: vscode.Uri,\n\t\tinitialContent: Uint8Array,\n\t\tdelegate: PawDrawDocumentDelegate\n\t) {\n\t\tsuper();\n\t\tthis._uri = uri;\n\t\tthis._documentData = initialContent;\n\t\tthis._delegate = delegate;\n\t}\n\n\tpublic get uri() { return this._uri; }\n\n\tpublic get documentData(): Uint8Array { return this._documentData; }\n\n\tprivate readonly _onDidDispose = this._register(new vscode.EventEmitter<void>());\n\t/**\n\t * Fired when the document is disposed of.\n\t */\n\tpublic readonly onDidDispose = this._onDidDispose.event;\n\n\tprivate readonly _onDidChangeDocument = this._register(new vscode.EventEmitter<{\n\t\treadonly content?: Uint8Array;\n\t\treadonly edits: readonly PawDrawEdit[];\n\t}>());\n\t/**\n\t * Fired to notify webviews that the document has changed.\n\t */\n\tpublic readonly onDidChangeContent = this._onDidChangeDocument.event;\n\n\tprivate readonly _onDidChange = this._register(new vscode.EventEmitter<{\n\t\treadonly label: string,\n\t\tundo(): void,\n\t\tredo(): void,\n\t}>());\n\t/**\n\t * Fired to tell VS Code that an edit has occured in the document.\n\t * \n\t * This updates the document's dirty indicator.\n\t */\n\tpublic readonly onDidChange = this._onDidChange.event;\n\n\t/**\n\t * Called by VS Code when there are no more references to the document.\n\t * \n\t * This happens when all editors for it have been closed.\n\t */\n\tdispose(): void {\n\t\tthis._onDidDispose.fire();\n\t\tsuper.dispose();\n\t}\n\n\t/**\n\t * Called when the user edits the document in a webview.\n\t * \n\t * This fires an event to notify VS Code that the document has been edited.\n\t */\n\tmakeEdit(edit: PawDrawEdit) {\n\t\tthis._edits.push(edit);\n\n\t\tthis._onDidChange.fire({\n\t\t\tlabel: 'Stroke',\n\t\t\tundo: async () => {\n\t\t\t\tthis._edits.pop();\n\t\t\t\tthis._onDidChangeDocument.fire({\n\t\t\t\t\tedits: this._edits,\n\t\t\t\t});\n\t\t\t},\n\t\t\tredo: async () => {\n\t\t\t\tthis._edits.push(edit);\n\t\t\t\tthis._onDidChangeDocument.fire({\n\t\t\t\t\tedits: this._edits,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Called by VS Code when the user saves the document.\n\t */\n\tasync save(cancellation: vscode.CancellationToken): Promise<void> {\n\t\tawait this.saveAs(this.uri, cancellation);\n\t\tthis._savedEdits = Array.from(this._edits);\n\t}\n\n\t/**\n\t * Called by VS Code when the user saves the document to a new location.\n\t */\n\tasync saveAs(targetResource: vscode.Uri, cancellation: vscode.CancellationToken): Promise<void> {\n\t\tconst fileData = await this._delegate.getFileData();\n\t\tif (cancellation.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tawait vscode.workspace.fs.writeFile(targetResource, fileData);\n\t}\n\n\t/**\n\t * Called by VS Code when the user calls `revert` on a document.\n\t */\n\tasync revert(_cancellation: vscode.CancellationToken): Promise<void> {\n\t\tconst diskContent = await PawDrawDocument.readFile(this.uri);\n\t\tthis._documentData = diskContent;\n\t\tthis._edits = this._savedEdits;\n\t\tthis._onDidChangeDocument.fire({\n\t\t\tcontent: diskContent,\n\t\t\tedits: this._edits,\n\t\t});\n\t}\n\n\t/**\n\t * Called by VS Code to backup the edited document.\n\t * \n\t * These backups are used to implement hot exit.\n\t */\n\tasync backup(destination: vscode.Uri, cancellation: vscode.CancellationToken): Promise<vscode.CustomDocumentBackup> {\n\t\tawait this.saveAs(destination, cancellation);\n\n\t\treturn {\n\t\t\tid: destination.toString(),\n\t\t\tdelete: async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait vscode.workspace.fs.delete(destination);\n\t\t\t\t} catch {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n}\n\n/**\n * Provider for paw draw editors.\n * \n * Paw draw editors are used for `.pawDraw` files, which are just `.png` files with a different file extension.\n * \n * This provider demonstrates:\n * \n * - How to implement a custom editor for binary files.\n * - Setting up the initial webview for a custom editor.\n * - Loading scripts and styles in a custom editor.\n * - Communication between VS Code and the custom editor.\n * - Using CustomDocuments to store information that is shared between multiple custom editors.\n * - Implementing save, undo, redo, and revert.\n * - Backing up a custom editor.\n */\nexport class SvgaFileEditorProvider implements vscode.CustomEditorProvider<PawDrawDocument> {\n\n\tpublic static register(context: vscode.ExtensionContext): vscode.Disposable {\n\t\treturn vscode.window.registerCustomEditorProvider(\n\t\t\tSvgaFileEditorProvider.viewType,\n\t\t\tnew SvgaFileEditorProvider(context),\n\t\t\t{\n\t\t\t\twebviewOptions: {\n\t\t\t\t\tretainContextWhenHidden: true,\n\t\t\t\t},\n\t\t\t\tsupportsMultipleEditorsPerDocument: false,\n\t\t\t});\n\t}\n\n\tprivate static readonly viewType = 'svga.preview';\n\n\t/**\n\t * Tracks all known webviews\n\t */\n\tprivate readonly webviews = new WebviewCollection();\n\n\tconstructor(\n\t\tprivate readonly _context: vscode.ExtensionContext\n\t) { }\n\n\t//#region CustomEditorProvider\n\n\tasync openCustomDocument(\n\t\turi: vscode.Uri,\n\t\topenContext: { backupId?: string },\n\t\t_token: vscode.CancellationToken\n\t): Promise<PawDrawDocument> {\n\t\tconst document: PawDrawDocument = await PawDrawDocument.create(uri, openContext.backupId, {\n\t\t\tgetFileData: async () => {\n\t\t\t\tconst webviewsForDocument = Array.from(this.webviews.get(document.uri));\n\t\t\t\tif (!webviewsForDocument.length) {\n\t\t\t\t\tthrow new Error('Could not find webview to save for');\n\t\t\t\t}\n\t\t\t\tconst panel = webviewsForDocument[0];\n\t\t\t\tconst response = await this.postMessageWithResponse<number[]>(panel, 'getFileData', {});\n\t\t\t\treturn new Uint8Array(response);\n\t\t\t}\n\t\t});\n\n\t\tconst listeners: vscode.Disposable[] = [];\n\n\t\tlisteners.push(document.onDidChange(e => {\n\t\t\t// Tell VS Code that the document has been edited by the use.\n\t\t\tthis._onDidChangeCustomDocument.fire({\n\t\t\t\tdocument,\n\t\t\t\t...e,\n\t\t\t});\n\t\t}));\n\n\t\tlisteners.push(document.onDidChangeContent(e => {\n\t\t\t// Update all webviews when the document changes\n\t\t\tfor (const webviewPanel of this.webviews.get(document.uri)) {\n\t\t\t\tthis.postMessage(webviewPanel, 'update', {\n\t\t\t\t\tedits: e.edits,\n\t\t\t\t\tcontent: e.content,\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tdocument.onDidDispose(() => disposeAll(listeners));\n\n\t\treturn document;\n\t}\n\n\tasync resolveCustomEditor(\n\t\tdocument: PawDrawDocument,\n\t\twebviewPanel: vscode.WebviewPanel,\n\t\t_token: vscode.CancellationToken\n\t): Promise<void> {\n\t\tthis.webviews.add(document.uri, webviewPanel);\n\t\twebviewPanel.webview.options = {\n\t\t\tenableScripts: true,\n\t\t};\n\t\twebviewPanel.webview.html = this.getHtmlForWebview(webviewPanel.webview);\n\n\n\t\twebviewPanel.webview.onDidReceiveMessage(e => this.onMessage(document, e));\n\n\t\twebviewPanel.webview.onDidReceiveMessage(e => {\n\t\t\tconsole.log(\"document.documentData\");\n\t\t\tif (e.type === 'ready') {\n\t\t\t\tconsole.log(\"read to play\"),\n\t\t\t\tthis.postMessage(webviewPanel, 'init', {\n\t\t\t\t\tvalue: document.documentData\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate readonly _onDidChangeCustomDocument = new vscode.EventEmitter<vscode.CustomDocumentEditEvent<PawDrawDocument>>();\n\tpublic readonly onDidChangeCustomDocument = this._onDidChangeCustomDocument.event;\n\n\tpublic saveCustomDocument(document: PawDrawDocument, cancellation: vscode.CancellationToken): Thenable<void> {\n\t\treturn document.save(cancellation);\n\t}\n\n\tpublic saveCustomDocumentAs(document: PawDrawDocument, destination: vscode.Uri, cancellation: vscode.CancellationToken): Thenable<void> {\n\t\treturn document.saveAs(destination, cancellation);\n\t}\n\n\tpublic revertCustomDocument(document: PawDrawDocument, cancellation: vscode.CancellationToken): Thenable<void> {\n\t\treturn document.revert(cancellation);\n\t}\n\n\tpublic backupCustomDocument(document: PawDrawDocument, context: vscode.CustomDocumentBackupContext, cancellation: vscode.CancellationToken): Thenable<vscode.CustomDocumentBackup> {\n\t\treturn document.backup(context.destination, cancellation);\n\t}\n\tprivate getHtmlForWebview(webview: vscode.Webview): string {\n\t\tconst scriptPath = vscode.Uri.file(\n\t\t\tpath.join(this._context.extensionPath, 'media', 'svga.perview.js')\n\t\t);\n\t\tconst scriptUri = webview.asWebviewUri(scriptPath);\n\n\t\tconst svgaFilePath = vscode.Uri.file(\n\t\t\tpath.join(this._context.extensionPath, 'media', 'svga.lite.min.js')\n\t\t);\n\t\tconst svgaFile = webview.asWebviewUri(svgaFilePath);\n\n\t\tconst htmlPath = vscode.Uri.file(\n\t\t\tpath.join(this._context.extensionPath, 'media', 'svga_new.html')\n\t\t);\n\t\tconst nonce = getNonce();\n\n\t\t/* const htmlContent1 = this.getHtmlContent(nonce, svgaFile, scriptUri);\n\t\tconsole.log(\"htmlContent1=\" + htmlContent1);\n\n\t\tvar htmlContent = fs.readFileSync(htmlPath.path, 'utf8');\n\n\t\thtmlContent = htmlContent.replace(\"{nonce}\", nonce).replace(\"{nonce}\", nonce).replace(\"{svgaFile}\", svgaFile + \"\").replace(\"{scriptUri}\", scriptUri + \"\"); */\n\t\tconst htmlContent = this.getHtmlContentNew(nonce, svgaFile, scriptUri);\n\t\t//console.log(\"htmlContent=\" + htmlContent);\n\t\treturn htmlContent;\n\t}\n\n\tprivate _requestId = 1;\n\tprivate readonly _callbacks = new Map<number, (response: any) => void>();\n\n\n\tprivate getHtmlContentNew(nonce: string, svgaFile: vscode.Uri, scriptUri: vscode.Uri): string {\n\t\treturn `<!DOCTYPE html>\n\t\t<html lang=\"en\">\n\t\t<head>\n\t\t\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n\t\t\t<meta name=\"description\" content=\"SVGAPlayer by 杜小菜，duqian2010@gmail.com\">\n\t\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n\t\t\t<meta name=\"renderer\" content=\"webkit\">\n\t\t\t<title>SVGAPlayer</title>\n\t\t\t<style>\n\t\t\t\t\n\t\t\t\thtml {\n\t\t\t\t\tbackground: transparent;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t}\n\t\t\n\t\t\t\tbody {\n\t\t\t\t\tbackground-color: rgb(60, 63, 65);\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t\tpadding-top: 30px;\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\toverflow-x: scroll;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t}\n\t\t\n\t\t\t\t.container_header {\n\t\t\t\t\twidth: 60%;\n\t\t\t\t\theight: 80px;\n\t\t\t\t\tmargin: 10px auto 0px;\n\t\t\t\t}\n\t\t\n\t\t\t\t.title {\n\t\t\t\t\theight: 30px;\n\t\t\t\t\tline-height: 30px;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\t\t\n\t\t\t\t#svgaTitle {\n\t\t\t\t\twidth: 50%;\n\t\t\t\t\theight: 30px;\n\t\t\t\t\tmargin: 10px auto 0px;\n\t\t\t\t\tcolor: #ffffff;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tmin-width: 550px;\n\t\t\t\t}\n\t\t\n\t\t\t\tbutton {\n\t\t\t\t\twidth: 50px;\n\t\t\t\t\theight: 30px;\n\t\t\t\t\tpadding: 5px 0px;\n\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\tborder: none;\n\t\t\t\t}\n\t\t\n\t\t\t\t#topDiv {\n\t\t\t\t\theight: 70px;\n\t\t\t\t\tmin-height: 30px;\n\t\t\t\t\tline-height: 30px;\n\t\t\t\t\tbackground: rgb(60, 63, 65);\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tmargin-left:100px;\n\t\t\t\t}\n\t\t\n\t\t\t\t.switch-bg-btn {\n\t\t\t\t\twidth: 14px;\n\t\t\t\t\theight: 14px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tfloat: left;\n\t\t\t\t\tmargin-left: 8px;\n\t\t\t\t\tmargin-top: 8px;\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\tborder: 1px solid rgb(50, 50, 50);\n\t\t\t\t}\n\t\t\n\t\t\t\t#switch-bg-none {\n\t\t\t\t\tbackground-size: 12px 12px;\n\t\t\t\t\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJiYWNrZ3JvdW5kSW1hZ2VfYnlfbW9reSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPgogICAgdmlld0JveD0iMCAwIDEwIDEwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMCAxMDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAuc3Qwe2ZpbGw6I0ZGRkZGRjt9CiAgICAgICAgLnN0MXtmaWxsOiNDMEMwQzA7fQogICAgPC9zdHlsZT4KICAgIDxyZWN0IGNsYXNzPSJzdDAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIvPgogICAgPHJlY3QgY2xhc3M9InN0MSIgd2lkdGg9IjUiIGhlaWdodD0iNSIvPgogICAgPHJlY3QgeD0iNSIgeT0iNSIgY2xhc3M9InN0MSIgd2lkdGg9IjUiIGhlaWdodD0iNSIvPgo8L3N2Zz4K);\n\t\t\t\t}\n\t\t\n\t\t\t\t#switch-bg-black {\n\t\t\t\t\tbackground-color: black;\n\t\t\t\t}\n\t\t\n\t\t\t\t#switch-bg-white {\n\t\t\t\t\tbackground-color: white;\n\t\t\t\t}\n\t\t\n\t\t\t\t#switch-bg-blue {\n\t\t\t\t\tbackground-color: #3498DB;\n\t\t\t\t}\n\t\t\n\t\t\t\t#switch-bg-green {\n\t\t\t\t\tbackground-color: #30CC71;\n\t\t\t\t}\n\t\t\n\t\t\t\t#switch-bg-yellow {\n\t\t\t\t\tbackground-color: #F1C40D;\n\t\t\t\t}\n\t\t\n\t\t\t\t#switch-bg-red {\n\t\t\t\t\tbackground-color: #C0392B;\n\t\t\t\t}\n\t\t\n\t\t\t\t#infoDiv {\n\t\t\t\t\theight: 30px;\n\t\t\t\t\tline-height: 30px;\n\t\t\t\t\twidth: auto;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tfont-family: '.AppleSystemUIFont', serif;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tcolor: rgb(255, 255, 255);\n\t\t\t\t\tcursor: default;\n\t\t\t\t}\n\t\t\t\n\t\t\t\t#content-body {\n\t\t\t\t\twidth: 70%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin:20px auto;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow-x: scroll;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t}\n\n\t\t\t\t#playerCanvas {\n\t\t\t\t\tmax-width:70%;\n\t\t\t\t\tmax-height:70%;\n\t\t\t\t\toverflow-x: scroll;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: 50%;\n\t\t\t\t\ttransform: translate(-50%,0%);\n\t\t\t\t\tborder: 1px solid #c0c0c0;\n\t\t\t\t\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJiYWNrZ3JvdW5kSW1hZ2VfYnlfbW9reSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPgogICAgdmlld0JveD0iMCAwIDEwIDEwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMCAxMDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAuc3Qwe2ZpbGw6I0ZGRkZGRjt9CiAgICAgICAgLnN0MXtmaWxsOiNDMEMwQzA7fQogICAgPC9zdHlsZT4KICAgIDxyZWN0IGNsYXNzPSJzdDAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIvPgogICAgPHJlY3QgY2xhc3M9InN0MSIgd2lkdGg9IjUiIGhlaWdodD0iNSIvPgogICAgPHJlY3QgeD0iNSIgeT0iNSIgY2xhc3M9InN0MSIgd2lkdGg9IjUiIGhlaWdodD0iNSIvPgo8L3N2Zz4K);\n\t\t\t\t}\n\t\t\t</style>\n\t\t</head>\n\t\t\n\t\t<body oncontextmenu=\"return false;\" onselectstart=\"return false;\">\n\t\t\t<div class=\"container_header\">\n\t\t\t\t<div id=\"svgaTitle\">\n\t\t\t\t\t<h5 class=\"title\">SVGAPlayer,Click color-button to change the background color</h5>\n\t\t\t\t\t<button onclick=\"startAnimation()\">Play</button>\n\t\t\t\t\t<button onclick=\"pauseAnimation()\">Pause</button>\n\t\t\t\t\t<button onclick=\"stopAnimation()\">Clear</button>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"topDiv\">\n\t\t\t\t\t<div class=\"switch-bg-btn\" id=\"switch-bg-none\" onclick=\"onSwitchBackground(this)\"></div>\n\t\t\t\t\t<div class=\"switch-bg-btn\" id=\"switch-bg-black\" onclick=\"onSwitchBackground(this)\"></div>\n\t\t\t\t\t<div class=\"switch-bg-btn\" id=\"switch-bg-white\" onclick=\"onSwitchBackground(this)\"></div>\n\t\t\t\t\t<div class=\"switch-bg-btn\" id=\"switch-bg-blue\" onclick=\"onSwitchBackground(this)\"></div>\n\t\t\t\t\t<div class=\"switch-bg-btn\" id=\"switch-bg-green\" onclick=\"onSwitchBackground(this)\"></div>\n\t\t\t\t\t<div class=\"switch-bg-btn\" id=\"switch-bg-yellow\" onclick=\"onSwitchBackground(this)\"></div>\n\t\t\t\t\t<div class=\"switch-bg-btn\" id=\"switch-bg-red\" onclick=\"onSwitchBackground(this)\"></div>\n\t\t\t\t\t<div id=\"infoDiv\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"content_body\">\n\t\t\t\t<div id=\"content-div\">\n\t\t\t\t\t<canvas id=\"playerCanvas\"></canvas>\n\t\t\t\t\t<script nonce=\"${nonce}\" src=\"${svgaFile}\"></script>\n\t\t\t\t\t<!-- <script nonce=\"${nonce}\" src=\"${scriptUri}\"></script>\n\t\t\t\t\t<!-- <script nonce=\"WRjNwz1vANRYI2atJBqF1gIllCxZpg90\"\n\t\t\t\t\t\tsrc=\"https://file%2B.vscode-resource.vscode-cdn.net/Users/duqian/Documents/DuQian/MyGithub/MyPlugins/VSCodePlugins/duqian/media/svga.lite.min.js\"></script>  -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\n\t\t\t<script type=\"text/javascript\">\n\t\t\t\twindow.addEventListener('mousewheel', function (event) {\n\t\t\t\t\tif (event.ctrlKey === true || event.metaKey) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}, { passive: false });\n\t\t\n\t\t\t\twindow.addEventListener('DOMMouseScroll', function (event) {\n\t\t\t\t\tif (event.ctrlKey === true || event.metaKey) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}, { passive: false });\n\t\t\n\t\t\n\t\t\t\tconsole.log(\"init1\");\n\t\t\t\tconst {\n\t\t\t\t\tDownloader,\n\t\t\t\t\tParser,\n\t\t\t\t\tPlayer\n\t\t\t\t} = SVGA;\n\t\t\t\tlet parser = new SVGA.Parser();\n\t\t\t\tlet player = new SVGA.Player('#playerCanvas');\n\t\t\t\tlet lastData = undefined;\n\t\t\t\t(function () {\n\t\t\t\t\tconst vscode = acquireVsCodeApi();\n\t\t\t\t\tconst svgaFn = (data) => {\n\t\t\t\t\t\tconst downloader = new Downloader();\n\t\t\t\t\t\t// 默认调用 WebWorker 线程解析\n\t\t\t\t\t\t// 可配置 new Parser({ disableWorker: true }) 禁止\n\t\t\t\t\t\tconsole.log(\"init play\");\n\t\t\t\t\n\t\t\t\t\t\t(async () => {\n\t\t\t\t\t\t\tconst svgaData = await parser.do(data);\n\t\t\t\t\t\t\tawait player.mount(svgaData);\n\t\t\t\t\t\t\tplayer\n\t\t\t\t\t\t\t\t// 开始动画事件回调\n\t\t\t\t\t\t\t\t.$on('start', () => console.log('event start'))\n\t\t\t\t\t\t\t\t// 暂停动画事件回调\n\t\t\t\t\t\t\t\t.$on('pause', () => console.log('event pause'))\n\t\t\t\t\t\t\t\t// 停止动画事件回调\n\t\t\t\t\t\t\t\t.$on('stop', () => console.log('event stop'))\n\t\t\t\t\t\t\t\t// 动画结束事件回调\n\t\t\t\t\t\t\t\t.$on('end', () => console.log('event end'))\n\t\t\t\t\t\t\t\t// 清空动画事件回调\n\t\t\t\t\t\t\t\t.$on('clear', () => console.log('event clear'))\n\t\t\t\t\t\t\t\t// 动画播放中事件回调\n\t\t\t\t\t\t\t\t.$on('process', () => console.log('event process', player.progress));\n\t\t\t\t\t\t\t// 开始播放动画\n\t\t\t\t\t\t\tplayer.start();\n\t\t\t\t\t\t})();\n\t\t\t\t\t};\n\t\t\t\t\n\t\t\t\t\t// // Handle messages from the extension\n\t\t\t\t\twindow.addEventListener('message', async e => {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tbody,\n\t\t\t\t\t\t} = e.data;\n\t\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\t\tcase 'init': {\n\t\t\t\t\t\t\t\tconst originData = body.value.data;\n\t\t\t\t\t\t\t\tconst data = new Uint8Array(originData);\n\t\t\t\t\t\t\t\tconsole.log(\"originData=\" + originData);\n\t\t\t\t\t\t\t\tconsole.log(\"data=\" + data);\n\t\t\t\t\t\t\t\tlastData = data;\n\t\t\t\t\t\t\t\tsvgaFn(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvscode.postMessage({\n\t\t\t\t\t\ttype: 'ready'\n\t\t\t\t\t});\n\t\t\t\t}());\n\t\t\n\t\t\t\t//播放\n\t\t\t\tfunction startAnimation() {\n\t\t\t\t\tparser = new SVGA.Parser();\n\t\t\t\t    player = new SVGA.Player('#playerCanvas');\n\t\t\t\t\tconsole.log(\"startAnimation\"+lastData);\n\t\t\t\t\t(async () => {\n\t\t\t\t\t\tconst svgaData = await parser.do(lastData);\n\t\t\t\t\t\tawait player.mount(svgaData);\n\t\t\t\t\t\t// 开始播放动画\n\t\t\t\t\t\tplayer.start();\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\n\t\t\t\t//暂停\n\t\t\t\tfunction pauseAnimation() {\n\t\t\t\t\tconsole.log(\"pauseAnimation\");\n\t\t\t\t\tplayer.pause();\n\t\t\t\t}\n\t\t\n\t\t\t\t//停止播放动画，如果 clearsAfterStop === true，将会清空画布\n\t\t\t\tfunction stopAnimation() {\n\t\t\t\t\tconsole.log(\"stopAnimation\");\n\t\t\t\t\tplayer.stop();\n\t\t\t\t}\n\t\t\n\t\t\t\tfunction onSwitchBackground(target) {\n\t\t\t\t\tdocument.getElementById('playerCanvas').style.backgroundImage = getComputedStyle(target, null).backgroundImage;\n\t\t\t\t\tdocument.getElementById('playerCanvas').style.backgroundColor = getComputedStyle(target, null).backgroundColor;\n\t\t\t\t\tif (target.id === 'switch-bg-none') {\n\t\t\t\t\t\tdocument.getElementById('playerCanvas').style.borderWidth = '1px';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocument.getElementById('playerCanvas').style.borderWidth = '0';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</script>\n\t\t</body>\n\t\t\n\t\t</html>`;\n\t}\n\n\tprivate getHtmlContent(nonce: string, svgaFile: vscode.Uri, scriptUri: vscode.Uri): string {\n\t\treturn `<!DOCTYPE html>\n\t\t\t\t<html lang=\"en\">\n\t\t\t\t<head>\n\t\t\t\t\t<meta charset=\"UTF-8\">\n\t\t\t\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\t\t\t\t\t<title>SVGA-Player</title>\n\t\t\t\t</head>\n\t\t\t\t<style>\n\t\t\t\t\tbody,html {\n\t\t\t\t\t\twidth:100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tcolor:#fff;\n\t\t\t\t\t}\n\t\t\t\t</style>\t\n\t\t\t\t<body>\n\t\t\t\t\t<canvas id=\"playerCanvas\"></canvas>\n\t\t\t\t\t<script nonce=\"${nonce}\" src=\"${svgaFile}\"></script>\n\t\t\t\t\t<script nonce=\"${nonce}\" src=\"${scriptUri}\"></script>\n\t\t\t\t</body>\n\t\t\t\t</html>`;\n\t}\n\n\tprivate postMessageWithResponse<R = unknown>(panel: vscode.WebviewPanel, type: string, body: any): Promise<R> {\n\t\tconst requestId = this._requestId++;\n\t\tconst p = new Promise<R>(resolve => this._callbacks.set(requestId, resolve));\n\t\tpanel.webview.postMessage({ type, requestId, body });\n\t\treturn p;\n\t}\n\n\tprivate postMessage(panel: vscode.WebviewPanel, type: string, body: any): void {\n\t\tpanel.webview.postMessage({ type, body });\n\t}\n\n\tprivate onMessage(document: PawDrawDocument, message: any) {\n\t\tswitch (message.type) {\n\t\t\tcase 'stroke':\n\t\t\t\tdocument.makeEdit(message as PawDrawEdit);\n\t\t\t\treturn;\n\n\t\t\tcase 'response':\n\t\t\t\t{\n\t\t\t\t\tconst callback = this._callbacks.get(message.requestId);\n\t\t\t\t\tcallback?.(message.body);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Tracks all webviews.\n */\nclass WebviewCollection {\n\n\tprivate readonly _webviews = new Set<{\n\t\treadonly resource: string;\n\t\treadonly webviewPanel: vscode.WebviewPanel;\n\t}>();\n\n\t/**\n\t * Get all known webviews for a given uri.\n\t */\n\tpublic *get(uri: vscode.Uri): Iterable<vscode.WebviewPanel> {\n\t\tconst key = uri.toString();\n\t\tfor (const entry of this._webviews) {\n\t\t\tif (entry.resource === key) {\n\t\t\t\tyield entry.webviewPanel;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Add a new webview to the collection.\n\t */\n\tpublic add(uri: vscode.Uri, webviewPanel: vscode.WebviewPanel) {\n\t\tconst entry = { resource: uri.toString(), webviewPanel };\n\t\tthis._webviews.add(entry);\n\n\t\twebviewPanel.onDidDispose(() => {\n\t\t\tthis._webviews.delete(entry);\n\t\t});\n\t}\n}","import * as vscode from 'vscode';\n\nexport function disposeAll(disposables: vscode.Disposable[]): void {\n\twhile (disposables.length) {\n\t\tconst item = disposables.pop();\n\t\tif (item) {\n\t\t\titem.dispose();\n\t\t}\n\t}\n}\n\nexport abstract class Disposable {\n\tprivate _isDisposed = false;\n\n\tprotected _disposables: vscode.Disposable[] = [];\n\n\tpublic dispose(): any {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isDisposed = true;\n\t\tdisposeAll(this._disposables);\n\t}\n\n\tprotected _register<T extends vscode.Disposable>(value: T): T {\n\t\tif (this._isDisposed) {\n\t\t\tvalue.dispose();\n\t\t} else {\n\t\t\tthis._disposables.push(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected get isDisposed(): boolean {\n\t\treturn this._isDisposed;\n\t}\n}","class EncodeDecode {\n\n  static b64EncodeUnicode(str: any) {\n    // first we use encodeURIComponent to get percent-encoded UTF-8,\n    // then we convert the percent encodings into raw bytes which\n    // can be fed into btoa.\n    return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,\n      // function toSolidBytes(match, p1) {\n      (match, p1) => {\n        // console.debug('match: ' + match);\n        return String.fromCharCode((\"0x\" + p1) as any);\n      }));\n  }\n\n  static b64DecodeUnicode(str: string) {\n    // Going backwards: from bytestream, to percent-encoding, to original string.\n    return decodeURIComponent(atob(str).split('').map(function (c) {\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n  }\n}\n\n\nexport function getNonce() {\n  let text = '';\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (let i = 0; i < 32; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n  return text;\n}\n\n\nexport function isJsonString(str: string) {\n  try {\n    let lottieObject = JSON.parse(str);\n    if (typeof lottieObject === \"object\") {\n      return lottieObject.hasOwnProperty(\"v\") && lottieObject.hasOwnProperty(\"w\") && lottieObject.hasOwnProperty(\"h\");\n    }\n  } catch (e) {\n  }\n  return false;\n}\n\n\nexport function getErrorPage(originData:string){\n\t\treturn `<!DOCTYPE html>\n\t\t\t\t<html lang=\"en\">\n\t\t\t\t<head>\n\t\t\t\t\t<meta charset=\"UTF-8\">\n\t\t\t\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\t\t\t\t\t<title>Lottie-Player</title>\n\t\t\t\t</head>\n\t\t\t\t<style>\n\t\t\t\t\tbody,html {\n\t\t\t\t\t\twidth:100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tcolor:#fff;\n\t\t\t\t\t}\n\t\t\t\t</style>\t\n\t\t\t\t<body>\n\t\t\t\t\t<h1>Sorry,it's not lottie json:\\n \\n</h1>\n          <h1></h1>\n          </br>\n        \n          <h4 style=\"display:block;\">${originData}</h4>\n\t\t\t\t</body>\n\t\t\t\t</html>`;\n}","module.exports = require(\"vscode\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// The module 'vscode' contains the VS Code extensibility API\n// Import the module and reference it with the alias vscode in your code below\nimport * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport { Base64 } from 'js-base64';\nimport { SvgaFileEditorProvider } from './SvgaFileEditorProvider';\n\nimport { LottieFileEditorProvider } from './LottieFileEditorProvider';\nimport { getNonce,isJsonString } from './utils';\n\nconst myProvider = class implements vscode.TextDocumentContentProvider {\n\tprovideTextDocumentContent(uri: vscode.Uri): string {\n\t\t//文本内容\n\t\treturn uri.path;\n\t}\n};\n\n// 追踪当前webview面板\nlet currentPanel: vscode.WebviewPanel | undefined = undefined;\n// This method is called when your extension is activated\n// Your extension is activated the very first time the command is executed\nexport function activate(context: vscode.ExtensionContext) {\n\n\t// This line of code will only be executed once when your extension is activated\n\tconsole.log('Congratulations, your extension \"duqian\" is now active!');\n\n\t// The command has been defined in the package.json file\n\t// Now provide the implementation of the command with registerCommand\n\n\tlet disposable = vscode.commands.registerCommand('duqian.helloflat', () => {\n\n\t\tvscode.window.showInformationMessage('Hello Flat, from DQVSCodePlugin!' + context.extensionUri);\n\n\t\t//vscode.workspace.registerTextDocumentContentProvider(\"flat\", myProvider);\n\n\t\tcurrentPanel = undefined;\n\t\tcurrentPanel = initWebView(context, \"FlatWeb\");\n\t\t// 获取磁盘上的资源路径\n\t\tconst onDiskPath = vscode.Uri.file(\n\t\t\tpath.join(context.extensionPath, 'media', 'ic_launcher_round.png')\n\t\t);\n\n\t\t// 获取在webview中使用的特殊URI\n\t\tconst vsSrc = onDiskPath.with({ scheme: 'vscode-resource' });\n\n\t\tconst stylesResetUri = currentPanel.webview.asWebviewUri(onDiskPath);\n\t\t// 设置HTML内容\n\t\tcurrentPanel.webview.html = getWebviewContent1(stylesResetUri);\n\t\tconsole.log(context.extensionUri);\n\n\t\t//stylesResetUri=https://file%2B.vscode-resource.vscode-cdn.net/Users/duqian/Documents/DuQian/xxx.png\n\t\tconsole.log(\"stylesResetUri=\" + stylesResetUri);\n\t\tconsole.log(vsSrc);\n\n\t\t//open file\n\t\t//let uri = vscode.Uri.file(\"/Users/duqian/Documents/DuQian/MyGithub/MyPluginLib\");\n\t\t//let success = vscode.commands.executeCommand('vscode.openFolder', uri);\n\t});\n\n\tcontext.subscriptions.push(disposable);\n\n\t//lottie-player\n\tcontext.subscriptions.push(vscode.commands.registerCommand('duqian.lottie', async (fileUri) => {\n\t\thandleSelectedFile(context, fileUri);\n\t}));\n\n\t//svga-player\n\tcontext.subscriptions.push(vscode.commands.registerCommand('duqian.svga', async (fileUri) => {\n\t\thandleSelectedFile(context, fileUri);\n\t\t//startPlaySvga(context, fileUri);\n\t}));\n\n\t//svga-editor\n\tcontext.subscriptions.push(SvgaFileEditorProvider.register(context));\n\n\t//lottie-editor\n\tcontext.subscriptions.push(LottieFileEditorProvider.register(context));\n}\n\n//  \"when\": \"explorerResourceIsFolder\",\"when\": \"resourceLangId == json\"\nfunction handleSelectedFile(context: vscode.ExtensionContext, fileUri: any) {\n\tconsole.log(\"duqian.fileUri=\" + fileUri);\n\tconst curFilePath = fileUri.path;\n\tcurrentPanel = undefined; //重新创建\n\tlet name = curFilePath.substring(curFilePath.lastIndexOf(\"/\") + 1, curFilePath.length);\n\tconsole.log(\"duqian.name =\" + name);\n\n\tcurrentPanel = initWebView(context, name);\n\n\tvar index = curFilePath.lastIndexOf(\".svga\");\n\tconsole.log(\"duqian.index=\" + index);\n\tconst htmlName = index > 0 ? \"svga-kiss.html\" : \"lottie.html\";\n\tconst htmlPath = vscode.Uri.file(\n\t\tpath.join(context.extensionPath, 'media', htmlName)\n\t);\n\n\tlet animContent = fs.readFileSync(curFilePath, 'utf8');\n\tlet htmlContent = fs.readFileSync(htmlPath.path, 'utf8');\n\t//console.log(\"animContent=\" + animContent);\n\tlet htmlContent2 = htmlContent.replace(\"{animationData}\", animContent);\n\tcurrentPanel.webview.html = htmlContent2;\n}\n\nfunction initWebView(context: vscode.ExtensionContext, name: string) {\n\tif (currentPanel) {\n\t\tconst columnToShowIn = vscode.window.activeTextEditor\n\t\t\t? vscode.window.activeTextEditor.viewColumn\n\t\t\t: undefined;\n\n\t\t// 如果我们已经有了一个面板，那就把它显示到目标列布局中\n\t\tcurrentPanel.reveal(columnToShowIn);\n\t} else {\n\t\t//webview\n\t\tcurrentPanel = vscode.window.createWebviewPanel(\n\t\t\t'FlatWeb', // webview id\n\t\t\tname, // title\n\t\t\tvscode.ViewColumn.One, // 给新的webview面板一个编辑器视图\n\t\t\t{\n\t\t\t\t// 只允许webview加载我们插件的`media`目录下的资源\n\t\t\t\tlocalResourceRoots: [vscode.Uri.file(path.join(context.extensionPath, 'media'))],\n\t\t\t\t// 在webview中启用脚本\n\t\t\t\tenableScripts: true\n\t\t\t}\n\t\t);\n\t\tconsole.log('init webview!');\n\t}\n\n\t// 当前面板被关闭后重置\n\tcurrentPanel.onDidDispose(\n\t\t() => {\n\t\t\tcurrentPanel = undefined;\n\t\t},\n\t\tnull,\n\t\tcontext.subscriptions\n\t);\n\treturn currentPanel;\n}\n\nfunction getWebviewContent1(srcPath: vscode.Uri) {\n\tconsole.log(\"srcPath:\" + srcPath);\n\treturn `\n\t\t  <!DOCTYPE html>\n\t\t  <html lang=\"en\">\n\t\t  <head>\n\t\t\t  <meta charset=\"UTF-8\">\n\t\t\t  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\t\t\t  <title>Dusan Coding</title>\n\t\t  </head>\n\t\t  <body>\n\t\t\t  <!--<img src=\"https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif\" width=\"300\" />-->\n\t\t\t  <img src=\"https://img1.kchuhai.com/ueditor/image/20210810/6376419298690944692274851.png\" width=\"500\"/>\n\t\t\t  <br/>\n\t\t\t  <img src=\"${srcPath}\" width=\"200\" />\n\t\t  </body>\n\t\t  </html>\n\t  `;\n}\n// This method is called when your extension is deactivated\nexport function deactivate() { }\n\nfunction postMessage(panel: vscode.WebviewPanel, type: string, body: any): void {\n\tpanel.webview.postMessage({ type, body });\n}\n\nfunction startPlaySvga(context: vscode.ExtensionContext, fileUri: any) {\n\tconsole.log(\"duqian.svga fileUri=\" + fileUri);\n\tconst curFilePath = fileUri.path;\n\tlet name = curFilePath.substring(curFilePath.lastIndexOf(\"/\") + 1, curFilePath.length);\n\tcurrentPanel = undefined;\n\tcurrentPanel = initWebView(context, name);\n\n\tvar index = curFilePath.lastIndexOf(\".svga\");\n\tconsole.log(\"duqian.index=\" + index);\n\tconst htmlName = index > 0 ? \"svga2.html\" : \"lottie.html\";\n\tconst htmlPath = vscode.Uri.file(\n\t\tpath.join(context.extensionPath, 'media', htmlName)\n\t);\n\n\tlet animContent = fs.readFileSync(curFilePath, 'utf8');\n\t//console.log(\"animContent=\" + animContent);\n\t//animContent = Buffer.from(animContent, 'utf-8').toString('base64');\n\t//animContent = EncodeDecode.b64EncodeUnicode(animContent); \n\t//animContent =  Base64.encode(animContent); \n\n\tlet htmlContent = fs.readFileSync(htmlPath.path, 'utf8');\n\t//let htmlContent2 = htmlContent.replace(\"{animationData}\", animContent);\n\n\n\tconst svgaFilePath = vscode.Uri.file(\n\t\tpath.join(context.extensionPath, 'media', 'svga.lite.min.js')\n\t);\n\tconst svgaFile = currentPanel.webview.asWebviewUri(svgaFilePath);\n\n\t//const svgaPath = currentPanel.webview.asWebviewUri(fileUri);\n\t//console.log(\"svgaPath=\" + svgaPath);\n\tconst nonce = getNonce();\n\n\tconst data = new Uint8Array(Buffer.from(animContent, 'utf-8'));\n\tconsole.log(\"data=\" + data);\n\n\thtmlContent = htmlContent.replace(\"${nonce}\", nonce)\n\t\t.replace(\"${nonce}\", nonce)\n\t\t.replace(\"${svgaFile}\", svgaFile + \"\")\n\t\t//.replace(\"{animationData}\", fileUri + \"\");\n\t\t.replace(\"{animationData}\",data+\"\");\n\n\tconsole.log(\"htmlContent2=\" + htmlContent);\n\n\tcurrentPanel.webview.html = htmlContent;\n\n\tpostMessage(currentPanel, \"init\", animContent);\n\n\tsetTimeout(function () {\n\t\tconsole.log(\"init player delay=\");\n\t\t//postMessage(currentPanel, \"init\", animContent);\n\t}, 2000);\n\n}\n\n"],"names":["PawDrawDocument","Disposable","static","uri","backupId","delegate","dataFile","vscode","Uri","parse","fileData","readFile","scheme","Uint8Array","workspace","fs","initialContent","super","_edits","_savedEdits","_onDidDispose","this","_register","EventEmitter","onDidDispose","event","_onDidChangeDocument","onDidChangeContent","_onDidChange","onDidChange","_uri","_documentData","_delegate","documentData","dispose","fire","makeEdit","edit","push","label","undo","async","pop","edits","redo","cancellation","saveAs","Array","from","targetResource","getFileData","isCancellationRequested","writeFile","_cancellation","diskContent","content","destination","id","toString","delete","LottieFileEditorProvider","context","window","registerCustomEditorProvider","viewType","webviewOptions","retainContextWhenHidden","supportsMultipleEditorsPerDocument","constructor","_context","webviews","WebviewCollection","_onDidChangeCustomDocument","onDidChangeCustomDocument","_requestId","_callbacks","Map","openContext","_token","document","create","console","log","webviewsForDocument","get","length","Error","panel","response","postMessageWithResponse","listeners","e","webviewPanel","postMessage","disposeAll","add","webview","options","enableScripts","html","getHtmlForWebview","onDidReceiveMessage","onMessage","json","type","checkLottie","isJsonString","htmlContent","getHtmlContent","value","commands","executeCommand","viewColumn","saveCustomDocument","save","saveCustomDocumentAs","revertCustomDocument","revert","backupCustomDocument","backup","lottie","file","path","join","extensionPath","readFileSync","body","requestId","p","Promise","resolve","set","message","callback","_webviews","Set","key","entry","resource","SvgaFileEditorProvider","scriptPath","scriptUri","asWebviewUri","svgaFilePath","svgaFile","nonce","getNonce","getHtmlContentNew","disposables","item","_isDisposed","_disposables","isDisposed","text","possible","i","charAt","Math","floor","random","str","lottieObject","JSON","hasOwnProperty","originData","module","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","currentPanel","handleSelectedFile","fileUri","curFilePath","name","substring","lastIndexOf","initWebView","index","htmlName","htmlPath","animContent","htmlContent2","replace","columnToShowIn","activeTextEditor","reveal","createWebviewPanel","ViewColumn","One","localResourceRoots","subscriptions","disposable","registerCommand","showInformationMessage","extensionUri","onDiskPath","vsSrc","with","stylesResetUri","srcPath","register"],"sourceRoot":""}